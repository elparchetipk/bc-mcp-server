<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Inter" font-size="18" font-weight="bold" fill="#333">Capas de Validación y Protección de Datos</text>
  
  <!-- Layer 1: Input Validation -->
  <g transform="translate(50, 70)">
    <rect x="0" y="0" width="700" height="80" fill="#ffe6e6" stroke="#ff4757" stroke-width="2" rx="10"/>
    <text x="20" y="25" font-family="Inter" font-size="14" font-weight="bold" fill="#ff4757">Capa 1: Validación de Entrada (Zod)</text>
    <text x="20" y="45" font-family="Inter" font-size="12" fill="#333">✓ Verificación de tipos de datos</text>
    <text x="20" y="60" font-family="Inter" font-size="12" fill="#333">✓ Validación de formato (emails, CUIDs, longitudes)</text>
    <text x="350" y="45" font-family="Inter" font-size="12" fill="#333">✓ Reglas de negocio básicas</text>
    <text x="350" y="60" font-family="Inter" font-size="12" fill="#333">✓ Sanitización de datos</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M 400 160 L 400 180" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Layer 2: Business Logic -->
  <g transform="translate(50, 190)">
    <rect x="0" y="0" width="700" height="80" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="10"/>
    <text x="20" y="25" font-family="Inter" font-size="14" font-weight="bold" fill="#b8860b">Capa 2: Lógica de Negocio (Aplicación)</text>
    <text x="20" y="45" font-family="Inter" font-size="12" fill="#333">✓ Verificación de permisos de usuario</text>
    <text x="20" y="60" font-family="Inter" font-size="12" fill="#333">✓ Validación de relaciones existentes</text>
    <text x="350" y="45" font-family="Inter" font-size="12" fill="#333">✓ Cálculos automáticos (word count, summary)</text>
    <text x="350" y="60" font-family="Inter" font-size="12" fill="#333">✓ Manejo de estados complejos</text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M 400 280 L 400 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Layer 3: Database Constraints -->
  <g transform="translate(50, 310)">
    <rect x="0" y="0" width="700" height="80" fill="#d1ecf1" stroke="#17a2b8" stroke-width="2" rx="10"/>
    <text x="20" y="25" font-family="Inter" font-size="14" font-weight="bold" fill="#0c5460">Capa 3: Constraints de Base de Datos (Prisma/SQL)</text>
    <text x="20" y="45" font-family="Inter" font-size="12" fill="#333">✓ Integridad referencial (Foreign Keys)</text>
    <text x="20" y="60" font-family="Inter" font-size="12" fill="#333">✓ Constraints de unicidad</text>
    <text x="350" y="45" font-family="Inter" font-size="12" fill="#333">✓ Checks de valores (NOT NULL, etc.)</text>
    <text x="350" y="60" font-family="Inter" font-size="12" fill="#333">✓ Transacciones ACID</text>
  </g>
  
  <!-- Arrow 3 -->
  <path d="M 400 400 L 400 420" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Layer 4: Data Storage -->
  <g transform="translate(50, 430)">
    <rect x="0" y="0" width="700" height="50" fill="#d4edda" stroke="#28a745" stroke-width="2" rx="10"/>
    <text x="20" y="25" font-family="Inter" font-size="14" font-weight="bold" fill="#155724">Datos Seguros y Consistentes</text>
    <text x="20" y="40" font-family="Inter" font-size="12" fill="#333">✓ Información validada y confiable para el sistema MCP</text>
  </g>
  
  <!-- Side annotations -->
  <g transform="translate(770, 150)">
    <rect x="0" y="0" width="3" height="200" fill="#ff6b6b"/>
    <text x="10" y="15" font-family="Inter" font-size="11" fill="#666">Fallos</text>
    <text x="10" y="30" font-family="Inter" font-size="11" fill="#666">rápidos</text>
    <text x="10" y="100" font-family="Inter" font-size="11" fill="#666">Protección</text>
    <text x="10" y="115" font-family="Inter" font-size="11" fill="#666">robusta</text>
    <text x="10" y="190" font-family="Inter" font-size="11" fill="#666">Garantías</text>
    <text x="10" y="205" font-family="Inter" font-size="11" fill="#666">ACID</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
</svg>